<% content_for :page_title, "Social Links" %>
<% content_for :page_subtitle, "Manage your social media links and follower counts" %>

<!-- Header with Actions -->
<div class="flex items-center justify-between mb-6">
  <div>
    <p class="text-sm text-gray-600">
      Total: <span class="font-semibold"><%= @social_links.count %></span>
      links
    </p>
  </div>

  <%= link_to new_admin_social_link_path, class: "inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors" do %>
    <svg
      class="w-5 h-5 mr-2"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M12 6v6m0 0v6m0-6h6m-6 0H6"
      />
    </svg>
    New Social Link
  <% end %>
</div>

<!-- Stats -->
<div class="grid grid-cols-3 gap-4 mb-6">
  <div class="bg-white rounded-lg shadow border border-gray-200 p-4">
    <p class="text-sm text-gray-600">In Header</p>

    <p class="text-2xl font-bold text-blue-600 mt-1">
      <%= SocialLink.header_links.count %>
    </p>
  </div>

  <div class="bg-white rounded-lg shadow border border-gray-200 p-4">
    <p class="text-sm text-gray-600">With Followers</p>

    <p class="text-2xl font-bold text-green-600 mt-1">
      <%= SocialLink.with_followers.count %>
    </p>
  </div>

  <div class="bg-white rounded-lg shadow border border-gray-200 p-4">
    <p class="text-sm text-gray-600">Total Followers</p>

    <p class="text-2xl font-bold text-purple-600 mt-1">
      <%= number_with_delimiter(SocialLink.sum(:follower_count)) %>
    </p>
  </div>
</div>

<!-- Social Links Table -->
<div class="bg-white rounded-lg shadow border border-gray-200 overflow-hidden">
  <% if @social_links.any? %>
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th
              class="
                px-6 py-3 text-left text-xs font-medium text-gray-500
                uppercase tracking-wider
              "
            >
              Platform
            </th>

            <th
              class="
                px-6 py-3 text-left text-xs font-medium text-gray-500
                uppercase tracking-wider
              "
            >
              Username
            </th>

            <th
              class="
                px-6 py-3 text-left text-xs font-medium text-gray-500
                uppercase tracking-wider
              "
            >
              Followers
            </th>

            <th
              class="
                px-6 py-3 text-left text-xs font-medium text-gray-500
                uppercase tracking-wider
              "
            >
              URL
            </th>

            <th
              class="
                px-6 py-3 text-left text-xs font-medium text-gray-500
                uppercase tracking-wider
              "
            >
              In Header
            </th>

            <th
              class="
                px-6 py-3 text-right text-xs font-medium text-gray-500
                uppercase tracking-wider
              "
            >
              Actions
            </th>
          </tr>
        </thead>

        <tbody class="bg-white divide-y divide-gray-200">
          <% @social_links.each do |link| %>
            <tr class="hover:bg-gray-50">
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                  <div class="flex-shrink-0">
                    <span class="inline-flex items-center justify-center h-10 w-10 rounded-full <%= link.color_class %> bg-opacity-10">
                      <svg
                        class="w-5 h-5 <%= link.color_class %>"
                        fill="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <% case link.platform %>
                        <% when 'twitter' %>
                          <path
                            d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"
                          />
                        <% when 'github' %>
                          <path
                            fill-rule="evenodd"
                            d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                          />
                        <% when 'linkedin' %>
                          <path
                            d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"
                          />
                        <% else %>
                          <path
                            d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"
                          />
                        <% end %>
                      </svg>
                    </span>
                  </div>

                  <div class="ml-4">
                    <div class="text-sm font-medium text-gray-900">
                      <%= link.platform_display_name %>
                    </div>
                  </div>
                </div>
              </td>

              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900">
                  <%= link.username || "—" %>
                </div>
              </td>

              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-semibold text-gray-900">
                  <%= link.formatted_follower_count || "—" %>
                </div>

                <% if link.follower_count %>
                  <div class="text-xs text-gray-500">
                    <%= number_with_delimiter(link.follower_count) %>
                  </div>
                <% end %>
              </td>

              <td class="px-6 py-4 whitespace-nowrap">
                <a
                  href="<%= link.url %>"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="
                    text-sm text-blue-600 hover:text-blue-800 truncate block
                    max-w-xs
                  "
                >
                  <%= link.url %>
                </a>
              </td>

              <td class="px-6 py-4 whitespace-nowrap">
                <% if link.display_in_header %>
                  <span
                    class="
                      inline-flex items-center px-2.5 py-0.5 rounded-full
                      text-xs font-medium bg-green-100 text-green-800
                    "
                  >
                    Yes
                  </span>
                <% else %>
                  <span
                    class="
                      inline-flex items-center px-2.5 py-0.5 rounded-full
                      text-xs font-medium bg-gray-100 text-gray-800
                    "
                  >
                    No
                  </span>
                <% end %>
              </td>

              <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                <div class="flex items-center justify-end space-x-3">
                  <%= link_to edit_admin_social_link_path(link), class: "text-blue-600 hover:text-blue-900" do %>
                    <svg
                      class="w-5 h-5"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                      />
                    </svg>
                  <% end %>

                  <%= button_to admin_social_link_path(link), method: :delete, data: { turbo_confirm: "Are you sure you want to delete this social link?" }, class: "text-red-600 hover:text-red-900" do %>
                    <svg
                      class="w-5 h-5"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                      />
                    </svg>
                  <% end %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div class="text-center py-12">
      <svg
        class="mx-auto h-12 w-12 text-gray-400"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"
        />
      </svg>

      <h3 class="mt-2 text-sm font-medium text-gray-900">No social links</h3>

      <p class="mt-1 text-sm text-gray-500">
        Get started by creating a new social link.
      </p>

      <div class="mt-6">
        <%= link_to new_admin_social_link_path, class: "inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700" do %>
          <svg
            class="w-5 h-5 mr-2"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 6v6m0 0v6m0-6h6m-6 0H6"
            />
          </svg>
          New Social Link
        <% end %>
      </div>
    </div>
  <% end %>
</div>

<!-- Info Box -->
<div class="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
  <div class="flex">
    <div class="flex-shrink-0">
      <svg
        class="h-5 w-5 text-blue-400"
        fill="currentColor"
        viewBox="0 0 20 20"
      >
        <path
          fill-rule="evenodd"
          d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
          clip-rule="evenodd"
        />
      </svg>
    </div>

    <div class="ml-3">
      <h3 class="text-sm font-medium text-blue-800">
        About Social Links
      </h3>

      <div class="mt-2 text-sm text-blue-700">
        <p>
          Social links appear in your portfolio's footer and navigation. Links
          marked "In Header" will also be displayed in the social stats bar on
          your homepage. Update follower counts regularly to keep your stats
          current.
        </p>
      </div>
    </div>
  </div>
</div>
