<% content_for :page_title, "Edit Project" %>
<% content_for :page_subtitle, "Update project details" %>

<!-- Breadcrumb Navigation -->
<nav class="mb-6" aria-label="Breadcrumb">
  <ol class="flex items-center space-x-2 text-sm text-gray-500">
    <li>
      <%= link_to "Projects", admin_projects_path, class: "hover:text-gray-700 transition-colors" %>
    </li>

    <li>
      <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
        <path
          fill-rule="evenodd"
          d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
          clip-rule="evenodd"
        />
      </svg>
    </li>

    <li class="font-medium text-gray-900">Edit Project</li>
  </ol>
</nav>

<!-- Project Info Banner -->
<div class="max-w-4xl mb-6">
  <div class="bg-white rounded-lg shadow border border-gray-200 p-4">
    <div class="flex items-center justify-between">
      <div class="flex-1">
        <div class="flex items-center gap-3">
          <% if @project.has_logo? %>
            <%= image_tag @project.logo_url,
              alt: "#{@project.name} logo",
              class: "w-12 h-12 rounded-lg object-cover" %>
          <% end %>

          <div>
            <h2 class="text-lg font-semibold text-gray-900">
              <%= @project.name %>
            </h2>

            <div class="flex items-center gap-3 mt-1">
              <span
                class="
                  inline-flex items-center px-2.5 py-0.5 rounded-full text-xs
                  font-medium
                  <%= @project.project_type == 'startup' ? 'bg-purple-100 text-purple-800' : @project.project_type == 'side_project' ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-800' %>
                "
              >
                <%= @project.project_type_display_name %>
              </span>

              <span
                class="
                  inline-flex items-center px-2.5 py-0.5 rounded-full text-xs
                  font-medium
                  <%= @project.active? ? 'bg-green-100 text-green-800' : @project.in_development? ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-800' %>
                "
              >
                <%= @project.status_display_name %>
              </span>

              <% if @project.featured %>
                <span
                  class="
                    inline-flex items-center px-2.5 py-0.5 rounded-full text-xs
                    font-medium bg-yellow-100 text-yellow-800
                  "
                >
                  <svg
                    class="w-3 h-3 mr-1"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                    />
                  </svg>
                  Featured
                </span>
              <% end %>
            </div>
          </div>
        </div>

        <% if @project.description.present? %>
          <p class="text-sm text-gray-600 mt-3 line-clamp-2">
            <%= @project.short_description(200) %>
          </p>
        <% end %>
      </div>

      <div class="text-right ml-4">
        <% if @project.has_url? %>
          <a
            href="<%= @project.url %>"
            target="_blank"
            rel="noopener noreferrer"
            class="
              inline-flex items-center px-3 py-1.5 text-sm font-medium
              text-blue-700 bg-blue-50 rounded-md hover:bg-blue-100
              transition-colors
            "
          >
            <svg
              class="w-4 h-4 mr-1.5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
              />
            </svg>
            Visit Site
          </a>
        <% else %>
          <p class="text-sm text-gray-500">No URL</p>
        <% end %>

        <p class="text-xs text-gray-500 mt-2">
          Position: <%= @project.position %>
        </p>
      </div>
    </div>
  </div>
</div>

<!-- Form Container -->
<div class="max-w-4xl"><%= render "form" %></div>

<!-- Danger Zone -->
<div class="max-w-4xl mt-6">
  <div class="bg-red-50 rounded-lg border border-red-200 p-6">
    <div class="flex items-start justify-between">
      <div>
        <h3 class="text-sm font-medium text-red-800">Delete this project</h3>

        <p class="mt-1 text-sm text-red-700">
          Once you delete this project, there is no going back. Please be
          certain.
        </p>
      </div>

      <%= button_to "Delete Project",
        admin_project_path(@project),
        method: :delete,
        class: "ml-4 px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors",
        form: {
          data: {
            turbo_confirm: "Are you sure you want to permanently delete this project? This action cannot be undone."
          }
        } %>
    </div>
  </div>
</div>
